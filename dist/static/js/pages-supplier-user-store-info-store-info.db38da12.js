(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-supplier-user-store-info-store-info"],{"483b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"store-info-page"},[i("v-uni-view",{staticClass:"xy-form"},[i("v-uni-view",{staticClass:"xy-form-title"},[t._v("基础信息")]),i("uni-list",[i("uni-list-item",{attrs:{title:"店铺标志"},nativeOn:{click:function(e){return t.selectUploadImage(e)}}},[i("v-uni-view",{staticClass:"xy-form-headimg",attrs:{slot:"right"},slot:"right"},[t.form.headPicUrl?i("v-uni-image",{attrs:{src:t.IMG_URL+t.form.headPicUrl,mode:""}}):i("v-uni-image",{attrs:{src:"../../../../static/home_img.png",mode:""}})],1)],1),i("uni-list-item",{attrs:{"show-arrow":!1,title:"店铺名称"}},[i("v-uni-input",{attrs:{type:"text",placeholder:"请输入店铺名称(必填)"},model:{value:t.form.storeName,callback:function(e){t.$set(t.form,"storeName",e)},expression:"form.storeName"}})],1),i("uni-list-item",{attrs:{"show-arrow":!1,title:"联系人"}},[i("v-uni-input",{attrs:{type:"text",placeholder:"请输入证件号(必填)"},model:{value:t.form.contacts,callback:function(e){t.$set(t.form,"contacts",e)},expression:"form.contacts"}})],1),i("uni-list-item",{attrs:{"show-arrow":!1,title:"联系电话"}},[i("v-uni-input",{attrs:{type:"number",maxlength:11,placeholder:"请输入联系电话(必填)"},model:{value:t.form.phoneNumber,callback:function(e){t.$set(t.form,"phoneNumber",e)},expression:"form.phoneNumber"}})],1),i("uni-list-item",{attrs:{"show-arrow":!1,title:"店铺介绍"}},[i("v-uni-input",{attrs:{type:"text",placeholder:"请输入店铺介绍"},model:{value:t.form.storeSuggest,callback:function(e){t.$set(t.form,"storeSuggest",e)},expression:"form.storeSuggest"}})],1)],1),i("v-uni-view",{staticClass:"xy-form-title"},[t._v("配送设置")]),i("uni-list",[i("uni-list-item",{attrs:{"show-arrow":!1,title:"当天配送",showSwitch:!0,switchChecked:"1"==t.form.distributionToday},on:{switchChange:function(e){e=t.$handleEvent(e),t.distributionTodayChange(e)}}}),i("uni-list-item",{attrs:{"show-arrow":!1,title:"配送周期"}},[i("v-uni-view",{staticClass:"flex flex-y-center"},[i("v-uni-input",{staticClass:"flex-item-1",attrs:{type:"number",placeholder:"客户可提前几天下单"},model:{value:t.form.period,callback:function(e){t.$set(t.form,"period",e)},expression:"form.period"}}),i("v-uni-view",{staticClass:"period"},[t._v("可提前"+t._s(t.form.period)+"天订货")])],1)],1),i("uni-list-item",{attrs:{"show-arrow":!1,title:"配送时间段"}},[i("v-uni-view",{staticClass:"flex flex-x-end flex-y-center"},[i("v-uni-picker",{attrs:{value:t.form.distributionStart,range:t.starTimeArray},on:{change:function(e){e=t.$handleEvent(e),t.bindPickerChange(e)}},nativeOn:{click:function(e){return t.setPickering("distributionStart")}}},[i("v-uni-view",{staticClass:"xy-btn"},[t._v(t._s(t.form.distributionStart))])],1),i("v-uni-view",{staticStyle:{padding:"0 24upx"}},[t._v("—")]),i("v-uni-picker",{attrs:{value:t.form.distributionEnd-1,range:t.endTimeArray},on:{change:function(e){e=t.$handleEvent(e),t.bindPickerChange(e)}},nativeOn:{click:function(e){return t.setPickering("distributionEnd")}}},[i("v-uni-view",{staticClass:"xy-btn"},[t._v(t._s(t.form.distributionEnd))])],1)],1)],1)],1),i("v-uni-view",{staticClass:"xy-form-title"},[t._v("经营设置")]),i("uni-list",[i("uni-list-item",{attrs:{"show-arrow":!1,title:"正在营业",showSwitch:!0,switchChecked:"1"==t.form.enabled},on:{switchChange:function(e){e=t.$handleEvent(e),t.enabledChange(e)}}}),i("uni-list-item",{attrs:{"show-arrow":!1,title:"营业时间段"}},[i("v-uni-view",{staticClass:"flex flex-x-end flex-y-center"},[i("v-uni-picker",{attrs:{value:t.form.openStart,range:t.starTimeArray},on:{change:function(e){e=t.$handleEvent(e),t.bindPickerChange(e)}},nativeOn:{click:function(e){return t.setPickering("openStart")}}},[i("v-uni-view",{staticClass:"xy-btn"},[t._v(t._s(t.form.openStart))])],1),i("v-uni-view",{staticStyle:{padding:"0 24upx"}},[t._v("—")]),i("v-uni-picker",{attrs:{value:t.form.openEnd-1,range:t.endTimeArray},on:{change:function(e){e=t.$handleEvent(e),t.bindPickerChange(e)}},nativeOn:{click:function(e){return t.setPickering("openEnd")}}},[i("v-uni-view",{staticClass:"xy-btn"},[t._v(t._s(t.form.openEnd))])],1)],1)],1),i("uni-list-item",{attrs:{title:"经营地址"},nativeOn:{click:function(e){return t.showCityPicker(e)}}},[t.pickerText?i("v-uni-view",{attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.pickerText))]):i("v-uni-view",{staticClass:"xy-form-selcet-text",attrs:{slot:"right"},slot:"right"},[t._v("请选择经营地址")])],1),i("uni-list-item",{attrs:{title:"详细地址","show-arrow":!0},nativeOn:{click:function(e){return t.chooseLocation(e)}}},[i("v-uni-view",{attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.form.detailedAddress))])],1),i("uni-list-item",{attrs:{title:"经纬位置","show-arrow":!1}},[i("v-uni-view",{staticClass:"flex flex-x-end"},[t._v(t._s(t.form.longitude)+","+t._s(t.form.latitude))])],1)],1)],1),i("xyButton",{attrs:{width:"690rpx",height:"75rpx"},nativeOn:{click:function(e){return t.save(e)}}},[t._v("提交")]),i("w-picker",{ref:"cityPicker",attrs:{mode:"region",defaultVal:t.cityPickerDefaultVal,themeColor:"#23A389"},on:{confirm:function(e){e=t.$handleEvent(e),t.onConfirm(e)}}})],1)},r=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},"66ac":function(t,e,i){"use strict";i.r(e);var n=i("994a"),r=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=r.a},"8cdc":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.store-info-page .xy-btn[data-v-f4ca6f34]{width:%?200?%}.store-info-page .period[data-v-f4ca6f34]{background:#f7dece;border-radius:%?2?%;display:inline-block;color:#ff6000;padding:%?5?% %?24?%}',""])},"93a4":function(t,e,i){"use strict";i.r(e);var n=i("483b"),r=i("66ac");for(var a in r)"default"!==a&&function(t){i.d(e,t,function(){return r[t]})}(a);i("da27");var o=i("2877"),s=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"f4ca6f34",null);e["default"]=s.exports},"994a":function(t,e,i){"use strict";var n=i("e54b"),r=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("7f7f");var a=r(i("5176"));i("96cf");var o=r(i("3b8d")),s=r(i("ad21")),c=r(i("4369")),u=r(i("91b5")),l=r(i("fbbb")),d=n(i("f5bd")),f={components:{uniList:s.default,uniListItem:c.default,xyButton:l.default,wPicker:u.default},data:function(){return{pickerText:"",cityPickerDefaultVal:[0,0,0],IMG_URL:this.$api.IMG_URL,starTimeArray:[],endTimeArray:[],pickering:"",sellerId:"",form:{id:"",storeName:"",headPicUrl:"",phoneNumber:"",period:"",storeSuggest:"",provinceCode:"",cityCode:"",districCode:"",detailedAddress:"",distributionToday:"",enabled:"",distributionStart:"",distributionEnd:"",openStart:"",openEnd:"1",contacts:"",longitude:"",latitude:""},rules:[{name:"storeName",checkType:"string",checkRule:"1,",errorMsg:"请输入店铺名称"},{name:"contacts",checkType:"string",checkRule:"1,",errorMsg:"请输入联系人"},{name:"phoneNumber",checkType:"string",checkRule:"1,",errorMsg:"请输入联系电话"},{name:"period",checkType:"string",checkRule:"1,",errorMsg:"请输入配送周期"},{name:"provinceCode",checkType:"string",checkRule:"1,",errorMsg:"请请选择经营地址"},{name:"detailedAddress",checkType:"string",checkRule:"1,",errorMsg:"请选择详细地址"}]}},mounted:function(){this.$common.methods.doIosInputBlur()},onLoad:function(t){if(this.setTimeArray(),t.sellerId){this.sellerId=t.sellerId;var e=[t.provinceCode,t.cityCode,t.districCode],i=this.$common.methods.getCityPickerDefaultVal(e);this.cityPickerDefaultVal=i.defaultVal,this.pickerText=i.pickerText,this.queryStoreInfo(this.sellerId)}},methods:{queryStoreInfo:function(){var t=(0,o.default)(regeneratorRuntime.mark(function t(e){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.GET_STORE_INFO(e);case 2:i=t.sent,this.form=(0,a.default)(this.form,i);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),showCityPicker:function(){this.$refs.cityPicker.show()},onConfirm:function(t){this.pickerText=t.result,this.form.provinceCode=t.checkValue[0],this.form.cityCode=t.checkValue[1],this.form.districCode=t.checkValue[2]},setPickering:function(t){this.pickering=t},bindPickerChange:function(t){console.log(t.target.value),-1!==this.pickering.indexOf("End")?this.form[this.pickering]=this.endTimeArray[t.target.value]:this.form[this.pickering]=t.target.value},setTimeArray:function(){for(var t=0;t<24;t++)this.starTimeArray.push(t),this.endTimeArray.push(t+1)},distributionTodayChange:function(t){t.value?this.form.distributionToday="1":this.form.distributionToday="0"},enabledChange:function(t){t.value?this.form.enabled="1":this.form.enabled="0"},chooseLocation:function(){var t=this;uni.chooseLocation({success:function(e){t.form.longitude=e.longitude,t.form.latitude=e.latitude,t.form.detailedAddress="我的位置"==e.name?e.address:e.name,console.log("位置名称："+e.name),console.log("详细地址："+e.address),console.log("纬度："+e.latitude),console.log("经度："+e.longitude)}})},selectUploadImage:function(){uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){var e=this,i=t.tempFilePaths,n=this.$api.UPLOAD_URL+"/imgUpload?token="+this.$store.state.loginProvider.token;uni.uploadFile({url:n,filePath:i[0],name:"file",formData:{savePath:"storeInfo"},success:function(t){e.form.headPicUrl=JSON.parse(t.data).aaData.path}})}.bind(this)})},save:function(){var t=this.$common.methods.formCheck(this.form,this.rules);t&&this.$api.request("store/update",this.form,"POST","提交中...").then(function(t){t&&0==t.state&&uni.showToast({title:"保存成功",duration:2e3,success:function(){setTimeout(function(){uni.navigateBack()},2e3)}})})}}};e.default=f},b1aa:function(t,e,i){var n=i("8cdc");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var r=i("4f06").default;r("90457d52",n,!0,{sourceMap:!1,shadowMode:!1})},da27:function(t,e,i){"use strict";var n=i("b1aa"),r=i.n(n);r.a},e54b:function(t,e,i){var n=i("268f"),r=i("85f2");function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=r&&n?n(t,i):{};a.get||a.set?r(e,i,a):e[i]=t[i]}return e.default=t,e}t.exports=a},f5bd:function(t,e,i){"use strict";var n=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.GET_STORE_REPUTATION=e.GET_STORE_INFO=e.GET_STORE_LIST=void 0;var r=n(i("795b")),a=n(i("8742")),o=function(t){return a.default.request("store/list",{sellerId:t})};e.GET_STORE_LIST=o;var s=function(t){return a.default.request("store/queryBySellerId",{sellerId:t})};e.GET_STORE_INFO=s;var c=function(t){return new r.default(function(e,i){a.default.request("reputation/list",{customerId:t}).then(function(t){var i={reputationVal:5,reputationLevel:"A"};if(t.length>0)switch(t.aaData[0].reputationLevel){case"A":i.reputationVal=5,i.reputationLevel="A";break;case"B":i.reputationVal=4,i.reputationLevel="B";break;case"C":i.reputationVal=3,i.reputationLevel="C";break;case"D":i.reputationVal=2,i.reputationLevel="D";break;default:i.reputationVal=1,i.reputationLevel="E";break}e(i)})})};e.GET_STORE_REPUTATION=c}}]);