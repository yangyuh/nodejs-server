(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-supplier-product-product-add-product-add"],{"0bca":function(e,t,r){"use strict";var i=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.GET_PRODUCTADDORDER_LIST=t.GET_TRADINGAREA_LIST=t.UPDATE_PRODUCT_SKU=t.CREATE_PRODUCT=t.GET_QUOTATION_LIST=t.GET_PRODUCT_CODE=t.GET_MEASUREMETHOD_LIST=t.CHECK_PRODUCT_NAME=t.UPDATE_PRODUCT=t.GET_PRODUCT_LIST=void 0;var s=i(r("8742")),o=function(e){return s.default.request("product/queryDtoList",e||{})};t.GET_PRODUCT_LIST=o;var n=function(e){return s.default.request("productsku/update",e||{})};t.UPDATE_PRODUCT=n;var a=function(e){return s.default.request("product/checkProductNameExist",{name:e})};t.CHECK_PRODUCT_NAME=a;var u=function(){return s.default.request("measuremethod/list",{orderField:"f_method_type"})};t.GET_MEASUREMETHOD_LIST=u;var c=function(e){return s.default.request("product/getProductCode",{customerId:e})};t.GET_PRODUCT_CODE=c;var l=function(e){return s.default.request("quotation/list",e||{})};t.GET_QUOTATION_LIST=l;var d=function(e){return s.default.request("product/create",e||{},"POST","提交中...")};t.CREATE_PRODUCT=d;var h=function(e){return s.default.request("productsku/updateRelate",e||{},"POST","提交中...")};t.UPDATE_PRODUCT_SKU=h;var m=function(e){return s.default.request("tradingarea/tradingAreaList",e||{})};t.GET_TRADINGAREA_LIST=m;var f=function(e){return s.default.request("product/list",e||{})};t.GET_PRODUCTADDORDER_LIST=f},"20b0":function(e,t,r){var i=r("4034");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=r("4f06").default;s("1b82871d",i,!0,{sourceMap:!1,shadowMode:!1})},3102:function(e,t,r){"use strict";var i=r("20b0"),s=r.n(i);s.a},4034:function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */',""])},"7cb3":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"product-add-page"},[r("v-uni-view",{staticClass:"xy-form"},[r("v-uni-view",{staticClass:"xy-form-title"},[e._v("商品信息")]),r("uni-list",[r("uni-list-item",{attrs:{title:"商品图片"},nativeOn:{click:function(t){return e.selectUploadImage(t)}}},[r("v-uni-view",{staticClass:"xy-form-headimg",attrs:{slot:"right"},slot:"right"},[e.form.skuPicUrl&&null!=e.form.skuPicUrl&&"null"!=e.form.skuPicUrl?r("v-uni-image",{attrs:{src:e.IMG_URL+e.form.skuPicUrl}}):e.form.productPicUrl&&null!=e.form.productPicUrl&&"null"!=e.form.productPicUrl?r("v-uni-image",{attrs:{src:e.IMG_URL+e.form.productPicUrl}}):r("v-uni-image",{attrs:{src:"../../../../static/home_img.png",mode:""}})],1)],1),r("uni-list-item",{attrs:{title:"商品名称",showArrow:!1}},[r("v-uni-input",{attrs:{type:"text",placeholder:"请输入商品名称(必填)"},model:{value:e.form.skuName,callback:function(t){e.$set(e.form,"skuName",t)},expression:"form.skuName"}})],1),r("uni-list-item",{attrs:{title:"商品编码",showArrow:!1}},[r("v-uni-input",{attrs:{type:"text",placeholder:"请输入商品编码(必填)"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),r("uni-list-item",{attrs:{title:"基本单位",showArrow:!0},nativeOn:{click:function(t){return e.openSelector("measuremethod")}}},[e.measuremethodSelected?r("v-uni-view",{attrs:{slot:"right"},slot:"right"},[e._v(e._s(e.measuremethodSelected.label))]):r("v-uni-view",{staticClass:"xy-form-selcet-text",attrs:{slot:"right"},slot:"right"},[e._v("请选择基本单位(必填)")])],1),r("uni-list-item",{attrs:{title:"基本单价",showArrow:!1}},[r("v-uni-input",{attrs:{type:"number",placeholder:"请输入价格，如8.00(必填)"},model:{value:e.form.basePrice,callback:function(t){e.$set(e.form,"basePrice",t)},expression:"form.basePrice"}})],1),r("uni-list-item",{attrs:{title:"备注",showArrow:!1}},[r("v-uni-input",{attrs:{type:"text",placeholder:"请输入备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),r("v-uni-view",{staticClass:"xy-form-title"},[e._v("其他信息")]),r("uni-list",[r("uni-list-item",{attrs:{switchId:"isActualPrice","show-arrow":!1,title:"是否时价",showSwitch:!0,switchChecked:1==e.form.isActualPrice},on:{switchChange:function(t){t=e.$handleEvent(t),e.switchChange(t)}}}),r("uni-list-item",{attrs:{switchId:"chargingModel","show-arrow":!1,title:"是否称重",showSwitch:!0,switchChecked:1==e.form.chargingModel,disabled:""},on:{switchChange:function(t){t=e.$handleEvent(t),e.switchChange(t)}}}),r("uni-list-item",{attrs:{switchId:"stockLimit","show-arrow":!1,title:"管理库存",showSwitch:!0,switchChecked:1==e.form.stockLimit},on:{switchChange:function(t){t=e.$handleEvent(t),e.switchChange(t)}}}),r("uni-list-item",{attrs:{switchId:"published","show-arrow":!1,title:"是否上架",showSwitch:!0,switchChecked:1==e.form.published},on:{switchChange:function(t){t=e.$handleEvent(t),e.switchChange(t)}}})],1),r("xyButton",{attrs:{width:"690rpx",height:"75rpx"},nativeOn:{click:function(t){return e.save(t)}}},[e._v("提交")])],1),0!=e.measuremethodList.length?r("w-picker",{ref:"measuremethod",attrs:{mode:"selector",defaultVal:[0],themeColor:"#23A389",selectList:e.measuremethodList},on:{confirm:function(t){t=e.$handleEvent(t),e.onConfirm(t)}}}):e._e(),0!=e.storeList.length?r("w-picker",{ref:"store",attrs:{mode:"selector",defaultVal:[0],themeColor:"#23A389",selectList:e.storeList},on:{confirm:function(t){t=e.$handleEvent(t),e.onConfirm(t)}}}):e._e()],1)},s=[];r.d(t,"a",function(){return i}),r.d(t,"b",function(){return s})},9629:function(e,t,r){"use strict";r.r(t);var i=r("7cb3"),s=r("aae6");for(var o in s)"default"!==o&&function(e){r.d(t,e,function(){return s[e]})}(o);r("3102");var n=r("2877"),a=Object(n["a"])(s["default"],i["a"],i["b"],!1,null,"a4d44f4c",null);t["default"]=a.exports},aae6:function(e,t,r){"use strict";r.r(t);var i=r("c48a"),s=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);t["default"]=s.a},c48a:function(e,t,r){"use strict";var i=r("e54b"),s=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("28a5"),r("7f7f"),r("96cf");var o=s(r("3b8d")),n=s(r("5176")),a=s(r("ad21")),u=s(r("4369")),c=s(r("fbbb")),l=s(r("91b5")),d=i(r("0bca")),h=i(r("f5bd")),m={components:{uniList:a.default,uniListItem:u.default,xyButton:c.default,wPicker:l.default},data:function(){return{IMG_URL:this.$api.IMG_URL,customerId:"",selectorName:"",quotationList:[],quotationSelected:"",storeList:[],storeSelected:"",measuremethodList:[],measuremethodSelected:"",form:{id:"",categoryId:"381",code:"",name:"",vulgo:"",basePrice:"",storeId:"",measureMethod:"",measureTypePro:"",productPicUrl:"",remark:"",deleted:0,haveSku:1,customerId:"",published:1,isActualPrice:0,chargingModel:2,stockLimit:0},rules:[{name:"name",checkType:"string",checkRule:"1,",errorMsg:"请输入商品名称"},{name:"code",checkType:"string",checkRule:"1,",errorMsg:"请输入商品编码"},{name:"measureMethod",checkType:"string",checkRule:"1,",errorMsg:"请选择基本单位"},{name:"basePrice",checkType:"string",checkRule:"1,",errorMsg:"请输入基本单价"},{name:"storeId",checkType:"string",checkRule:"1,",errorMsg:"请选择店铺"}]}},onLoad:function(){this.customerId=this.$store.state.loginProvider.typeCode,this.queryMeasuremethodList(),this.queryStoreList(this.customerId),this.$store.state.skuEditObj?this.form=(0,n.default)(this.form,this.$store.state.skuEditObj):this.queryProductCode(this.customerId)},methods:{queryMeasuremethodList:function(){var e=(0,o.default)(regeneratorRuntime.mark(function e(){var t,r,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.GET_MEASUREMETHOD_LIST();case 2:t=e.sent,t.list&&(r=[],t.list.map(function(e){var t={label:e.name,value:e.code+";"+e.methodType};r.push(t),i.form.measureMethod==e.code&&(i.measuremethodSelected={label:e.name,value:e.code+";"+e.methodType})}),this.measuremethodList=r);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),queryStoreList:function(){var e=(0,o.default)(regeneratorRuntime.mark(function e(t){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.GET_STORE_LIST(t);case 2:r=e.sent,r&&(i=[],r.list.map(function(e){var t={label:e.storeName,value:e.id};i.push(t)}),this.storeList=i,this.storeSelected=i[0]);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),queryProductCode:function(){var e=(0,o.default)(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.GET_PRODUCT_CODE(t);case 2:r=e.sent,r&&(this.form.code=r);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),openSelector:function(e){this.selectorName=e,this.$refs[e].show()},onConfirm:function(e){this[this.selectorName+"Selected"]=e.checkArr,"measuremethod"==this.selectorName&&(1==this[this.selectorName+"Selected"].value.split(";")[1]?this.form.chargingModel=1:this.form.chargingModel=2)},switchChange:function(e){e.value?this.form[e.switchId]=1:"isActualPrice"==e.switchId||"stockLimit"==e.switchId?this.form[e.switchId]=0:this.form[e.switchId]=2},save:function(){var e=(0,o.default)(regeneratorRuntime.mark(function e(){var t,r,i,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t={id:this.form.id,categoryId:"999999",code:this.form.code,name:this.form.skuName,vulgo:this.form.vulgo,basePrice:this.form.basePrice,productPicUrl:this.form.productPicUrl,remark:this.form.remark,deleted:this.form.deleted,haveSku:this.form.haveSku,published:this.form.published,isActualPrice:this.form.isActualPrice,chargingModel:this.form.chargingModel,stockLimit:this.form.stockLimit,customerId:this.customerId,storeId:this.storeSelected.value},this.measuremethodSelected&&(t.measureMethod=this.measuremethodSelected.value.split(";")[0],t.measureTypePro=this.measuremethodSelected.value.split(";")[1]),r=this.$common.methods.formCheck(t,this.rules),!r){e.next=16;break}if(!t.id){e.next=12;break}return i={id:this.form.skuId,productId:this.form.id,name:this.form.skuName,price:this.form.skuPrice,remark:this.form.remark,isActualPrice:this.form.isActualPrice,chargingModel:this.form.chargingModel,stockLimit:this.form.stockLimit,published:this.form.published,skuPicUrl:this.form.productPicUrl,skuMeasure:this.form.skuMeasure,skuWeight:this.form.skuWeight,vulgo:this.form.vulgo},e.next=8,d.UPDATE_PRODUCT_SKU(i);case 8:s=e.sent,s&&s.id&&uni.showToast({title:"保存成功",duration:2e3,success:function(){setTimeout(function(){uni.navigateBack()},2e3)}}),e.next=16;break;case 12:return e.next=14,d.CREATE_PRODUCT(t);case 14:o=e.sent,o&&this.$common.methods.toPage("/pages/supplier/product/product-add/add-succeed");case 16:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),selectUploadImage:function(){uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var t=this,r=e.tempFilePaths,i=this.$api.UPLOAD_URL+"/imgUpload?token="+this.$store.state.loginProvider.token;uni.uploadFile({url:i,filePath:r[0],name:"file",formData:{savePath:"storeInfo"},success:function(e){t.form.productPicUrl=JSON.parse(e.data).aaData.path}})}.bind(this)})}}};t.default=m},e54b:function(e,t,r){var i=r("268f"),s=r("85f2");function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=s&&i?i(e,r):{};o.get||o.set?s(t,r,o):t[r]=e[r]}return t.default=e,t}e.exports=o},f5bd:function(e,t,r){"use strict";var i=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.GET_STORE_REPUTATION=t.GET_STORE_INFO=t.GET_STORE_LIST=void 0;var s=i(r("795b")),o=i(r("8742")),n=function(e){return o.default.request("store/list",{sellerId:e})};t.GET_STORE_LIST=n;var a=function(e){return o.default.request("store/queryBySellerId",{sellerId:e})};t.GET_STORE_INFO=a;var u=function(e){return new s.default(function(t,r){o.default.request("reputation/list",{customerId:e}).then(function(e){var r={reputationVal:5,reputationLevel:"A"};if(e.length>0)switch(e.aaData[0].reputationLevel){case"A":r.reputationVal=5,r.reputationLevel="A";break;case"B":r.reputationVal=4,r.reputationLevel="B";break;case"C":r.reputationVal=3,r.reputationLevel="C";break;case"D":r.reputationVal=2,r.reputationLevel="D";break;default:r.reputationVal=1,r.reputationLevel="E";break}t(r)})})};t.GET_STORE_REPUTATION=u}}]);